# Paging
- splits up address space into fixed-sized unit called page
  * Segmentation : variable size of logical segments(code, stack, heap)
- Page Frame : number of paages(physical memory is also split into number of pages)
- page table per process -> needed to translate virtual address to physical
## Advantages
- Flexibility : supporting the abstraction of address space effectively(heap/stack growth 신경안씀)
- Simplicity : free-space 관리가 손쉬움
  address space에 있는 페이지와 페이지 프레임의 사이즈가 같음, 할당하기 쉽고 리스트 유지가 쉬움
## Address Translation
- Virtual Address = VPN(Virtual Page Number) + Offset(offset within the page)
## Page Tables
- 32비트 address space, 4kb pages(12 bit 필요), 20-bits VPN으로 생각을 했을 때
- 4MB = 2^20개의 entry * 4
- 메모리에 저장
- 가상주조를 -> 물리적 주소를 저장하기 위한 자료 구조(Hash)
- 운영체제가 Virtual Page Number에 따라서 배열을 인덱싱해서 해당 entry를 찾아 냄
- Page Table Entry(PTE) : 플래그들, 데이터를 포함하는 하나의 Entry
- 장점 : 링크드 리스트 같은거 필요없음
- 단점 : 매번 엔트리 접근을 시도 할 때마다 한번 더 메모리 접근을 해야 함(페이지 테이블의 시작주소를 받아와야 해서)
  -> 단기기억 할 수 있는 캐시를 이용하면 빨라 질 수 있음
### Flags
- Valid Bit : 해당 변환이 유효한지 표시
- Protection Bit : 읽기/쓰기/실행 권한이 있는지 표시
- Present Bit : 해당 주소가 물리적으로 유효한지 표시
- Dirty Bit : 페이지가 메모리로 불려온 뒤로 수정 됐는지 표시
- Reference Bit : 페이지가 접근 되었는지 표시

# TLB(Translation Lookaside Buffer)
- MMU(Memory Management Unit)의 일부
- Virtual-to-Physical address 변환의 하드웨어 캐시
- VPN을 추출한 후, TLB에서 먼저 찾아 본 뒤 없으면 페이지 테이블에 접근해서 찾아오고 TLB에 기록
- Spatial locality로 인해 성능이 좋아짐
- Cost가 비싼 편
## Locality
- Temporal Locality : 특정 명령이나 데이터가 최근에 접근 되었을 경우, 잠시 후에 다시 접근 될 확률이 높음
- Spatial Locality : 주소 x에 있는 메모리에 접근 했을 경우, 잠시 후에 주변에 있는 메모리에 접근 할 확률이 높음
## TLB Miss - Hardware
- 하드웨어가 CISC(Complex Instruction Set Computer)에서 miss를 handle
- 하드웨어가 페이지 테이블이 메모리 어디에 있는지 정확히 알아야 함
- 하드웨어가 페이지 테이블을 돌아다니면서 해당 PTE를 찾아서 주소 추출 후 다시 명령 수행
- Hardware managed TLB
## TLB Miss - Software
- RISC(Reduced Instruction Set Computer)가 software-managed TLB를 가지고 있음
- Miss가 발생 했을 때 Trap 발동, Trap Handler로 TLB Miss를 handle
## TLB Entry
- 시간 복잡도 O(1) 달성을 위해서 Fully Associative Method로 관리해줘야함
- 보통 32, 64, 128개를 가지고 있음
- 하드웨어가 모든 TLB를 평행으로 뒤져서 찾아냄
- VPN + PFN + Other Bits(각종 bits)
