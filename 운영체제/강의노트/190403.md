# TLB
## Context Switching
- context switching을 하는 과정에서 VPN이 겹쳐 어떤 엔트리가 어떤 프로세스의 것인지 구별 할 수 없게 됨
- ASID(Address Space Identifier)를 TLB의 필드로 추가해서 구분
- 페이지하나를 공유 하는 방법도 있다(같이 사용하다가 특정 기능을 할)
## Replacement Policy
### LRU(Last Recently Used)
- 최근에 사용하지 않은 ENTRY는 피한다
- 메모리 레퍼런스 시스템에서 locality의 이점을 활용
## Smaller Tables - linear(연속된 공간)
- 보통 하나의 프로세스당 하나의 페이지 테이블 소유
- 페이지 테이블의 크기가 너무 커서 메모리에 부담을 줌 -> Internal Fragmentation 확률 상승
- 대부분 entry가 사용중이지 않음(값만 저장돼있음)
### Hybrid Approach
- 해결법 : Hybrid Approach = segment의 base를 세그먼트를 가리키는데 쓸 게 아니라, 페이지 테이블의 물리주소를 가리키도록 수정, bound는 페이지 테이블의 end
- 프로세스는 실행 중에 3개의 페이지 테이블을 지님(code, heap, stack)
- 하드웨어가 Segment Bits를 이용해 어떤 base/bound를 사용할지 결정
- 물리주소를 받아와서 VPN과 결합에 Page Table Entry의 주소 결정
- 단점 : 임의의 크기의 연속된 빈 공간을 찾는 문제는 여전히 존재, 여전히 크고 사용률이 높지 않은 비효율적인 공간을 page table로 잡을 수 있음 -> External Fregmentation
### Multi-Level Page Tables
- Linear page table을 트리 형태로 바꿈
- 페이지 테이블을 페이지 단위로 잘게 쪼갬
- 페이지가 invalid할 경우 해당 페이지를 페이지 테이블에 할당 하지 않음
- 페이자가 valid인지 확인 하기 위해서 **page directory** 는 새로운 개념(페이지 테이블의 페이지 테이블인거임) 사용
- Paged Page Table과 같은 뜻
- Page Directory Entries(valid bit, Page Frame Number)로 구성
