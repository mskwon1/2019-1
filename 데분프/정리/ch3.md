# 행렬

- 행렬은 2차원의 벡터
- 동일한 데이터 타입을 가진 데이터들로 구성

## 생성

- 벡터에 차원을 부여함으로써 간단히 생성
- dim()함수 : 벡터로부터 행렬 생성
  - dim(v) <- c(3,4) : 3*4의 행렬 생성
  - dim(matrix) 할 시 행과 열의 값을 반환
  - nrow(), ncol(), length()로 길이 계산 가능(행,열,전체)
- matrix()  함수 : 일반적인 방법
  - matrix(data=v,nrow=n,ncol=m) : v 벡터 데이터로 n행 m열로 구성된 행렬을 만든다
    - 지정하지 않으면 열방향 우선으로 설정 => byrow = TRUE로 인자를 주면 행방향 우선으로 바뀜
    - dimnames 인수 : 행과 열의 이름 지정 가능
      - nrow, ncol 중 하나만 지정 할 시, 자동으로 행/열의 길이를 계산해서 생성함ㄴㅇ
  - 행렬 전체를 하나의 동일한 값으로 채우고 싶으면 첫번째 인수에 하나의 값을 주면 됨(재사용 규칙 적용)

- rbind() / cbind() : 두개의 벡터를 결합하여 행렬을 생성하는 방법

  - 각각 행방향/열방향으로 두 벡터를 결합해 행렬을 생성, 벡터 변수의 이름이 행/열 이름으로 사용
  - 벡터 간의 결합 뿐만 아니라 벡터와 행렬을 결합할 때도 이용 가능

  - 심지어 행렬과 행렬의 결합도 가능!

## 인덱싱

- 행렬도 벡터처럼 인덱스를 이용해서 행렬로부터 행 또는 열 추출 가능
- 행렬은 두개의 차원에 대해 각각 인덱스를 가짐(쉼표로 구분) - 행,열
- 하나의 행 또는 열을 추출하려면 추출하려는 행/열을 지정한 후 다른차원은 비워둠
  - 여기서 출력값은 벡터(하나의 행/열만 추출했기 때문)
  - R은 가능하면 차원의 수를 줄여서 객체를 단순화 시키려고 함
  - 인덱싱을 통해 선택된 행/열이 2차원 형식을 유지하는 옵션 : drop = FALSE를 인자로 넣음
    - mat[1, , drop=FALSE]
- 여러 행/열을 한꺼번에 선택하기 위해서는 인덱스를 벡터 형태로
  - mat[1:2,], mat[,3:4], mat[1:2,3:4]
  - 출력된 인덱스는 기존의 인덱스가 아님
  - 인덱스를 음수로 주면 해당 행/열은 표시하지 않겠다는 뜻
- 인덱스를 활용해 셀 값 변경 가능 -> 해당 행/열에 있는 값 교체
  - mat[1,3] <- 77 (1행 3열에 77 넣기)
- 행렬 내의 일부를 다른 행렬로 대체 : 대체할 벡터를 행렬 인덱스의 위치에 할당
  - 해당 부분을 열방향으로 채움
- 행렬의 행이름/열이름 사용해 선택/추출 가능
  - rownames(), colnames()로 지정 가능
    - rownames(mat) <- v
  - dimnames()로 한번에 지정가능
    - dimnames(mat) <- list(v1,v2)
  - 지정한 뒤에는 인덱스로 사용 가능

## 다루기

- 행렬 데이터에 대한 연산은 기본적으로 벡터 연산의 원리가 적용
- 행렬과 스칼라간의 연산은 원소들이 각각 스칼라와 연산을 진행
- 행렬과 행렬간의 사칙연산은 두 행렬의 차원이 일치해야 가능(일대일 대응되는 원소끼리 진행)
  - 일치하지 않으면 오류 발생
  - 우리가 알고있는 일반적인 행렬 곱셈을 수행하려면 %*% 연산자를 이용해야함
    - 마찬가지로 행곱이 안되는 행렬쌍이면 오류 발생
- 벡터와 행렬의 곱셈 수행 시에는 벡터가 자동으로 행렬 형식으로 변환
  - 이 때도 조건 충족이 안되면 오류 발생
- 행렬과 벡터간의 산술 연산 : 일반적인 벡터 연산 적용
  - 차원 일치 할 필요 없음
  - 원소의 개수가 다를시 재사용 규칙 적용
  - 열방향으로 계산
- 행렬의 행과 열에 대한 합/평균
  - rowSums(), colSums(), rowMeans(), colMeans() : 인자는 행렬
- 전치행렬로의 변환 : t() 함수 - 행이 열로 되고 열이 행ㅇ으로 됨
  - 벡터에 대해서도 t() 함수 적용 가능, t() 함수가 벡터를 하나의 열을 갖는 행렬로 간주
    - 벡터가 하나의 행을 갖는 행렬으로 변환됨
    - 행렬에서 행을 추출한후, t() 함수 실행시 하나의 행을 가지는 행렬이 됨 -> 주의

## 배열

- 행렬의 일반화된 데이터 형식
- 차원을 속성으로 갖는 벡터
- 벡터와 행렬은 배열의 한 특별한 유형
- 행렬을 생성할때처럼 벡터에 차원을 부여해 배열을 생성
- dim() 함수 이용
  - a <- 1:24
    dim(a) <- c(3,4,2) : a를 3\*4\*2 3차원 배열로 만듬
- 출력 할 때 3차원 구조의 한 단면씩 출력
- array() 함수 이용
  - array(v, c(a,b,c)) : a b c는 각 차원의 길이
- 값을 추출하는 법은 같음 : 대괄호 안에 추출하고 싶은 인덱스를 쉼표로 구분해서 제공
  - ary[1,3,2] : 두번째 테이블에서 1행 3열 값 추출
  - 마찬가지로 값을 비워놓으면 행/열/테이블 출력가능
  - 출력된 결과가 2개의 차원만 필요로 하면 2차원 행렬로 만들어버림
    - 원래의 행과 열이 유지되지 않으며 새로 정의됨(열과 행이 뒤바뀌는 경우)